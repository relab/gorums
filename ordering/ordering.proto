syntax = "proto3";

package ordering;
option go_package = "github.com/relab/gorums/ordering";

import "google/rpc/status.proto";

service Gorums {
  // NodeStream is a stream that connects a client to a Node.
  // The messages that are sent on the stream contain both Metadata
  // and an application-specific message.
  rpc NodeStream(stream Metadata) returns (stream Metadata);
}

// Metadata is sent together with application-specific message types,
// and contains information necessary for Gorums to handle the messages.
message Metadata {
  uint64 MessageID = 1;
  string Method = 2;
  google.rpc.Status Status = 3;
  BroadcastMsg BroadcastMsg = 4;
}

message BroadcastMsg {
  string Sender = 1;
  string BroadcastID = 2;
  string SenderID = 3;
  string SenderAddr = 4;
  string OriginID = 5;
  string OriginAddr = 6;
  string PublicKey = 7;
  string Signature = 8;
  string MAC = 9;
  uint32 NumPeers = 10;
}
