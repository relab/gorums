// Code generated by protoc-gen-gorums. DO NOT EDIT.

package dev

import (
	empty "github.com/golang/protobuf/ptypes/empty"
	ordering "github.com/relab/gorums/ordering"
)

// Multicast plain. Response type is not needed here.
func (c *Configuration) Multicast(in *Request) error {
	msgID := c.mgr.nextMsgID()
	metadata := &ordering.Metadata{
		MessageID: msgID,
		MethodID:  multicastMethodID,
	}
	msg := &gorumsMessage{metadata: metadata, message: in}
	for _, n := range c.nodes {
		n.sendQ <- msg
	}
	return nil
}

// MulticastPerNodeArg with per_node_arg option.
// TODO(meling) currently this is not supported, but compiles as if
// per_node_arg wasn't specified. Need to implement support.
func (c *Configuration) MulticastPerNodeArg(in *Request, f func(*Request, uint32) *Request) error {
	msgID := c.mgr.nextMsgID()
	for _, n := range c.nodes {
		nodeArg := f(in, n.ID())
		if nodeArg == nil {
			continue
		}
		metadata := &ordering.Metadata{
			MessageID: msgID,
			MethodID:  multicastPerNodeArgMethodID,
		}
		msg := &gorumsMessage{metadata: metadata, message: nodeArg}
		n.sendQ <- msg
	}
	return nil
}

// Multicast2 is testing whether multiple streams work.
func (c *Configuration) Multicast2(in *Request) error {
	msgID := c.mgr.nextMsgID()
	metadata := &ordering.Metadata{
		MessageID: msgID,
		MethodID:  multicast2MethodID,
	}
	msg := &gorumsMessage{metadata: metadata, message: in}
	for _, n := range c.nodes {
		n.sendQ <- msg
	}
	return nil
}

// Reference imports to suppress errors if they are not otherwise used.
var _ empty.Empty

// Multicast3 is testing imported message type.
func (c *Configuration) Multicast3(in *Request) error {
	msgID := c.mgr.nextMsgID()
	metadata := &ordering.Metadata{
		MessageID: msgID,
		MethodID:  multicast3MethodID,
	}
	msg := &gorumsMessage{metadata: metadata, message: in}
	for _, n := range c.nodes {
		n.sendQ <- msg
	}
	return nil
}

// Reference imports to suppress errors if they are not otherwise used.
var _ empty.Empty

// Multicast4 is testing imported message type.
func (c *Configuration) Multicast4(in *empty.Empty) error {
	msgID := c.mgr.nextMsgID()
	metadata := &ordering.Metadata{
		MessageID: msgID,
		MethodID:  multicast4MethodID,
	}
	msg := &gorumsMessage{metadata: metadata, message: in}
	for _, n := range c.nodes {
		n.sendQ <- msg
	}
	return nil
}
